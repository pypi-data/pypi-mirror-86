<snaplogic-javascript-output-html />
<script>
    console.log("Operation: Paste Info")

    // Remove empty line generated by the display(HTML())
    var outputElements = document.getElementsByClassName("output_html");
    for (i = outputElements.length - 1; i >= 0; i--) {
        if (outputElements[i].children[0].tagName === "SNAPLOGIC-JAVASCRIPT-OUTPUT-HTML") {
            outputElements[i].parentElement.remove();
        }
    }

    var tempString = `
    <table class="snaplogic-snapinfo-table" style="margin-top: -25px">
        <tbody>
            <tr>
                <th scope="row">Org</th>
                <td>` + escapeHTML(atob('%s')) + `</td>
            </tr>
            <tr>
                <th scope="row">Project</th>
                <td>` + escapeHTML(atob('%s')) + `</td>
            </tr>
            <tr>
                <th scope="row">Pipeline</th>
                <td>` + escapeHTML(atob('%s')) + `</td>
            </tr>
            <tr>
                <th scope="row">Snap</th>
                <td>` + escapeHTML(atob('%s')) + `</td>
            </tr>
            <tr>
                <th scope="row">Plex</th>
                <td>` + escapeHTML(atob('%s')) + `</td>
            </tr>
        </tbody>
    </table>`

    document.getElementById("snapinfo-label").innerHTML = tempString;
    document.getElementsByClassName("snaplogic-load-script-btn")[0].style.visibility = "visible"
    document.getElementsByClassName("snaplogic-save-script-btn")[0].style.visibility = "visible"

    function load_script_callback() {
        document.getElementsByClassName("snaplogic-load-script-btn")[0].click();
    }
    require(
        ["base/js/dialog"],
        function (dialog) {
            dialog.modal({
                title: "Snap Linked",
                body: "The Snap has been linked to this notebook. Click \"Fetch Script\" to download the script to the notebook.",
                buttons: {
                    "Fetch Script": {
                        class: "btn-primary",
                        click: load_script_callback
                    },
                    "Close": {
                    }
                }
            });
        }
    );
</script>