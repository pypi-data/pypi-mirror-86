[tox]
; Examples:
;   $ tox
;     # Runs static checks, then pytest for all the pythons listed in 'envlist'
;   $ tox -e lint
;     # Only runs the linter checks
;   $ tox -e py38
;     # Runs all tests against python3.8 only
;   $ tox -e py
;     # Runs tests against the python interpreter where tox itself was installed
envlist = lint, py3{6,7,8,9}

; if any of the requested python interpreters is unavailable (e.g. on the local dev
; workstation), the tests are skipped and tox won't return an error
skip_missing_interpreters = true

[testenv]
deps =
    -r dev-requirements.txt
    -r requirements.txt
; downloads the latest pip, setuptools and wheel when creating the venv
download = true
; any arguments passed to tox command line after the '--' separator are passed through
; to pytest: e.g. `tox -e py -- -vv --lf -x`
commands =
    pytest {posargs}

[testenv:lint]
; no need to install current package for static linter, formatter, typechecker, etc.
skip_install = true
; use the latest python that pytype supports
basepython = python3.8
deps =
    -r dev-requirements.txt
commands =
    black --check --diff src tests
    pytype
