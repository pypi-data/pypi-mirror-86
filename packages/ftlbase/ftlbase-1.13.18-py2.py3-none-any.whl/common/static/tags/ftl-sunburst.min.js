riot.tag2("ftl-sunburst","","","",(function(e){var t=this;t.title=void 0,t.description=void 0,t.values=void 0;var a=d3.formatDefaultLocale({decimal:",",thousands:".",grouping:[3],currency:["R$ ",""],dateTime:"%d/%m/%Y H:%M:%S",date:"%d/%m/%Y",time:"%H:%M",periods:["",""],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]});function n(e,t){const n=e.split("#").pop(),i=document.getElementById(`${n}-title`),r=document.getElementById(`${n}-description`);i&&t.title&&(i.innerText=t.title),r&&t.description&&(r.innerText=t.description),hieararchy_data=function(e){const t={name:"root",children:[]};for(let a=0;a<e.length;a++){const n=e[a][0],i=+e[a][1];if(isNaN(i))continue;const r=n.split("->");let o=t;for(let t=0;t<r.length;t++){const n=o.children,l=r[t];let s=null;if(t+1<r.length){let t=!1;for(let e=0;e<n.length;e++)if(n[e].name===l){s=n[e],t=!0;break}t||(s={name:l,children:[],color:e[a][2],id:e[a][3]},n.push(s)),o=s}else s={name:l,value:i,color:e[a][2],id:e[a][3]},n.push(s)}}return t}(t.values);const o=function(e){const t=[];for(let a=0;a<e.length;a++){const n=e[a][0].split("->");for(let e=0;e<n.length;e++)t.push(n[e])}return[...new Set(t)]}(t.values);function l(t){const n=[];t.sequence.forEach(e=>{const t=a.format(",.1f")((100*e.value/c.value).toPrecision(3))+"%";n.push({text:e.data.name,badge:t})}),riot.mount(`${e}-breadcrumb`,"ftl-breadcrumb",{links:n,numbered:!1})}var s=d3.arc().startAngle(e=>e.x0).endAngle(e=>e.x1).innerRadius(e=>Math.sqrt(e.y0)).outerRadius(200),d=d3.arc().startAngle(e=>e.x0).endAngle(e=>e.x1).padAngle(.005).padRadius(200).innerRadius(e=>Math.sqrt(e.y0)).outerRadius(e=>Math.sqrt(e.y1)-1);const c=(u=hieararchy_data,d3.partition().size([2*Math.PI,4e4])(d3.hierarchy(u).sum(e=>e.value).sort((e,t)=>e.data.id-t.data.id||t.value-e.value)));var u;const p=d3.select(e).append("svg"),h=p.node();h.value={sequence:[],percentage:0};const v=p.append("text").attr("text-anchor","middle").attr("fill","#888").style("visibility","hidden");v.append("tspan").attr("class","percentage").attr("x",0).attr("y",0).attr("dy","0.35em").attr("font-size","3em").text(""),p.attr("viewBox","-200 -200 400 400").style("max-width","400px").style("font-size","12px").style("font-family","'Source Sans Pro','Helvetica Neue',Helvetica,Arial,sans-serif");d3.scaleOrdinal().domain(o).range(d3.quantize(e=>d3.interpolateSpectral(.8*e+.1),o.length).reverse());const f=p.append("g").selectAll("path").data(c.descendants().filter(e=>e.depth&&e.x1-e.x0>.001)).join("path").attr("fill",e=>function(e){const t=d3.color(e.data.color);if(t.opacity=1-.15*(e.depth-1),e.ancestors().reverse().slice(1),e.depth>1){e.parent.children.length;const a=e.parent.children.indexOf(e);t.opacity=t.opacity*(1-.15*a/3)}return t}(e)).attr("d",d);return p.append("g").attr("fill","none").attr("pointer-events","all").on("mouseleave",()=>{f.attr("fill-opacity",1),v.style("visibility","hidden"),h.value={sequence:[],percentage:0},l(h.value)}).selectAll("path").data(c.descendants().filter(e=>e.depth&&e.x1-e.x0>.001)).join("path").attr("d",s).on("mouseenter",(e,t)=>{const n=t.ancestors().reverse().slice(1);f.attr("fill-opacity",e=>n.indexOf(e)>=0?1:.3);const i=(100*t.value/c.value).toPrecision(3);v.style("visibility",null).select(".percentage").text(a.format(",.1f")(i)+"%"),h.value={sequence:n,percentage:i},l(h.value)}),h}t.on("mount",(function(){if(t.div_id=e.div_id,t.title=e.title,t.description=e.description,t.values=e.values,t.values&&t.values.length>0){const e={title:t.title,description:t.description,values:t.values};n(t.div_id,e)}}))}));