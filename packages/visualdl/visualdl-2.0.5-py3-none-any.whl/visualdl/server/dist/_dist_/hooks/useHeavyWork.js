const v={};import g from"../../__snowpack__/env.js";v.env=g;import{useCallback as y,useEffect as b,useRef as h,useState as L}from"../../web_modules/react.js";const S=(s,l,d,e)=>{const r=h(null),n=h(null),[p,u]=L(void 0),i=y(t=>d&&u(d(t)),[d]);return b(()=>{try{if(s&&typeof WebAssembly!="undefined"){var t;r.current||(r.current=s()),(t=r.current)===null||t===void 0||t.then(o=>u(o(e))).catch(()=>i(e));return}if(l&&typeof Worker!="undefined"){var c,a,f;n.current||(n.current=l()),(c=n.current)===null||c===void 0||c.postMessage(e),(a=n.current)===null||a===void 0||a.addEventListener("message",({data:o})=>u(o)),(f=n.current)===null||f===void 0||f.addEventListener("error",()=>i(e));return}}catch(o){v.env.MODE==="development"&&(console.error("Error during heavy work, trying to use fallback"),console.error(o)),i(e)}i(e)},[s,l,i,e]),p};export default S;
