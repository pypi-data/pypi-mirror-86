function d(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function p(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?d(Object(e),!0).forEach(function(n){b(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function b(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}import v,{Pages as i}from"../routes/index.js";import{useCallback as I,useEffect as h,useState as y}from"../../web_modules/react.js";import m from"../utils/event.js";import{fetcher as w}from"../utils/fetch.js";import P from"./useRequest.js";export const navMap={scalar:i.Scalar,histogram:i.Histogram,image:i.Image,audio:i.Audio,graph:i.Graph,embeddings:i.HighDimensional,pr_curve:i.PRCurve};const S=()=>{const[r,t]=y([]),{data:e,loading:n,error:a,mutate:c}=P("/components",w,{refreshInterval:r.length?61*1e3:15*1e3,dedupingInterval:14*1e3,errorRetryInterval:15*1e3,errorRetryCount:Number.POSITIVE_INFINITY,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1});h(()=>(m.on("refresh",c),()=>{m.off("refresh",c)}),[c]);const u=I(O=>{var l;const g=(l=e==null?void 0:e.map(o=>navMap[o]))!==null&&l!==void 0?l:[];return O.reduce((o,s)=>{if(s.children){const f=u(s.children);f.length&&o.push(p(p({},s),{},{children:f}))}else s.visible!==!1&&g.includes(s.id)&&o.push(s);return o},[])},[e]);return h(()=>{t(u(v))},[u]),[r,n,a]};export default S;
