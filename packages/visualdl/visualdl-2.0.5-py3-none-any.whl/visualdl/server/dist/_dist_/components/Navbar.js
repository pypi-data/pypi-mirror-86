const b={};import T from"../../__snowpack__/env.js";b.env=T;function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function K(e,t){if(e==null)return{};var n=B(e,t),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++){if(r=s[o],t.indexOf(r)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,r))continue;n[r]=e[r]}}return n}function B(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,s;for(s=0;s<r.length;s++){if(o=r[s],t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}import{Link as D,useLocation as q}from"../../web_modules/react-router-dom.js";import a,{useCallback as H,useEffect as Y,useMemo as N,useState as $}from"../../web_modules/react.js";import{border as V,borderRadius as z,rem as m,size as j,transitionProps as E}from"../utils/style.js";import O from"./Icon.js";import F from"./Language.js";import M from"./ThemeToggle.js";import U from"../../web_modules/@tippyjs/react.js";import G from"../utils/event.js";import{getApiToken as J}from"../utils/fetch.js";import Q from"../assets/images/logo.svg.proxy.js";import w from"../../web_modules/query-string.js";import d from"../../web_modules/styled-components.js";import X from"../hooks/useNavItems.js";import{useTranslation as I}from"../../web_modules/react-i18next.js";const R=b.env.SNOWPACK_PUBLIC_BASE_URI,Z=b.env.SNOWPACK_PUBLIC_PATH,k=b.env.SNOWPACK_PUBLIC_API_TOKEN_KEY;function L(e){if(!k)return e;const t=w.parseUrl(e);return w.stringifyUrl(c(c({},t),{},{query:c(c({},t.query),{},{[k]:J()})}))}const ee=d.nav.withConfig({displayName:"Navbar__Nav",componentId:"vunvj5-0"})(["background-color:var(--navbar-background-color);color:var(--navbar-text-color);"," padding:0 ",";display:flex;justify-content:space-between;align-items:stretch;"," > .left{display:flex;justify-content:flex-start;align-items:center;}> .right{display:flex;justify-content:flex-end;align-items:center;margin-right:-",";}"],j("100%"),m(20),E(["background-color","color"]),m(20)),te=d.a.withConfig({displayName:"Navbar__Logo",componentId:"vunvj5-1"})(["font-size:",";font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;margin-right:",";> img{"," vertical-align:middle;margin-right:",";}> span{vertical-align:middle;}"],m(20),m(40),j(m(31),m(98)),m(8)),f=d.div.withConfig({displayName:"Navbar__NavItem",componentId:"vunvj5-2"})(["height:100%;display:inline-flex;justify-content:center;align-items:center;background-color:var(--navbar-background-color);cursor:pointer;"," &:hover{background-color:var(--navbar-hover-background-color);}&.nav-item{padding:0 ",";}.nav-link{display:inline-block;width:100%;height:100%;display:inline-flex;justify-content:center;align-items:center;}.nav-text{margin:",";padding:"," 0 ",";"," "," text-transform:uppercase;}"],E("background-color"),m(20),m(20),m(10),m(7),e=>V("bottom",m(3),"solid",e.active?"var(--navbar-highlight-color)":"transparent"),E("border-bottom")),S=d.div.withConfig({displayName:"Navbar__SubNav",componentId:"vunvj5-3"})(["overflow:hidden;border-radius:",";"],z),ne=d.div.withConfig({displayName:"Navbar__NavItemChild",componentId:"vunvj5-4"})(["display:block;line-height:3em;&,&:visited{color:",";}&:hover{background-color:var(--background-focused-color);}> a{display:block;padding:0 ",";}"],e=>e.active?"var(--primary-color)":"var(--text-color)",m(20)),x=e=>{let{to:t,children:n}=e,r=K(e,["to","children"]);return a.createElement(D,h({to:t?L(t):""},r),n)},y=a.forwardRef(({id:e,cid:t,path:n,active:r},o)=>{const{t:s}=I("common"),g=N(()=>t?`${s(e)} - ${s(t)}`:s(e),[s,e,t]);return n?a.createElement(f,{active:r,ref:o},a.createElement(x,{to:n,className:"nav-link"},a.createElement("span",{className:"nav-text"},g))):a.createElement(f,{active:r,ref:o},a.createElement("span",{className:"nav-text"},g))});y.displayName="NavbarItem";const re=()=>{const{t:e,i18n:t}=I("common"),{pathname:n}=q(),r=H(()=>{const l=t.language,i=(t.options.supportedLngs||[]).filter(p=>p!=="cimode"),_=i.indexOf(l),u=_<0||_>=i.length-1?i[0]:i[_+1];t.changeLanguage(u)},[t]),o=N(()=>n.replace(R,""),[n]),[s]=X(),[g,C]=$([]);return Y(()=>{C(l=>s.map(i=>{var _;const u=(_=i.children)===null||_===void 0?void 0:_.map(p=>c(c({},p),{},{active:p.path===o}));if(i.children&&!i.path){const p=i.children.find(v=>v.path===o);if(p)return c(c({},i),{},{cid:p.id,path:o,active:!0,children:u});{const v=l.find(A=>A.id===i.id);if(v)return c(c(c({},i),v),{},{active:!1,children:u})}}return c(c({},i),{},{active:o===i.path,children:u})}))},[s,o]),a.createElement(ee,null,a.createElement("div",{className:"left"},a.createElement(te,{href:L(R+"/index")},a.createElement("img",{alt:"PaddlePaddle",src:Z+Q}),a.createElement("span",null,"VisualDL")),g.map(l=>l.children?a.createElement(U,{placement:"bottom-start",animation:"shift-away-subtle",interactive:!0,arrow:!1,offset:[0,0],hideOnClick:!1,role:"menu",content:a.createElement(S,null,l.children.map(i=>a.createElement(ne,{active:i.active,key:i.id},a.createElement(x,{to:i.path},e(l.id)," - ",e(i.id))))),key:l.active?`${l.id}-activated`:l.id},a.createElement(y,l)):a.createElement(y,h({},l,{key:l.id})))),a.createElement("div",{className:"right"},a.createElement(U,{placement:"bottom-end",animation:"shift-away-subtle",interactive:!0,arrow:!1,offset:[18,0],hideOnClick:!1,role:"menu",content:a.createElement(S,null,a.createElement(M,null))},a.createElement(f,{className:"nav-item"},a.createElement(O,{type:"theme"}))),a.createElement(f,{className:"nav-item",onClick:r},a.createElement(F,null)),a.createElement(f,{className:"nav-item",onClick:()=>G.emit("refresh")},a.createElement(O,{type:"refresh"}))))};export default re;
