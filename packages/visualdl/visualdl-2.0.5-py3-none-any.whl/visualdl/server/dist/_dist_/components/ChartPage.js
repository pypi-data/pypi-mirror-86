const N={};import A from"../../__snowpack__/env.js";N.env=A;function j(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o&&(i=i.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),n.push.apply(n,i)}return n}function U(e){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?j(Object(n),!0).forEach(function(i){T(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function T(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}import a,{useCallback as B,useEffect as V,useMemo as h,useState as x}from"../../web_modules/react.js";import{Trans as S,useTranslation as D}from"../../web_modules/react-i18next.js";import{headerHeight as K,link as W,primaryColor as $,rem as r,transitionProps as H}from"../utils/style.js";import M from"../../web_modules/react-spinners/BarLoader.js";import Y from"./Chart.js";import k from"./ChartCollapse.js";import q from"./Pagination.js";import F from"./SearchInput.js";import z from"../../web_modules/lodash/groupBy.js";import p from"../../web_modules/styled-components.js";import G from"../hooks/useSearchValue.js";const J=N.env.SNOWPACK_PUBLIC_PATH,Q=p(q).withConfig({displayName:"ChartPage__StyledPagination",componentId:"sc-24xkc5-0"})(["margin-top:",";"],r(20)),X=p.div.withConfig({displayName:"ChartPage__Wrapper",componentId:"sc-24xkc5-1"})(["display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:stretch;align-content:flex-start;margin-bottom:-",";> *{margin:0 "," "," 0;flex-shrink:0;flex-grow:0;&.maximized{margin-right:0;}}"],r(20),r(20),r(20)),Z=p.div.withConfig({displayName:"ChartPage__Search",componentId:"sc-24xkc5-2"})(["width:",";margin-bottom:",";"],r(280),r(16)),ee=p.div.withConfig({displayName:"ChartPage__Loading",componentId:"sc-24xkc5-3"})(["display:flex;justify-content:center;align-items:center;min-height:",";padding:"," 0;"],r(200),r(40)),I=p.div.withConfig({displayName:"ChartPage__Empty",componentId:"sc-24xkc5-4"})(["width:100%;text-align:center;font-size:",";color:var(--text-lighter-color);line-height:",";height:",";padding:"," 0 ",";background-color:var(--background-color);background-image:url(",");background-repeat:no-repeat;background-position:calc(50% + ",") ",";background-size:"," ",";"," ",""],r(16),r(24),e=>{var o;return(o=e.height)!==null&&o!==void 0?o:"auto"},r(320),r(70),`${J}/images/empty.svg`,r(25),r(70),r(280),r(244),H(["color","background-color"]),W),te=({items:e,loading:o,chartSize:n,withChart:i,className:g})=>{const{t:d}=D("common"),[u,E]=x(1),f=12,[b,v]=x(""),m=G(b),s=h(()=>{try{var t;const c=new RegExp(m);return(t=e==null?void 0:e.filter(l=>c.test(l.label)))!==null&&t!==void 0?t:[]}catch(c){return[]}},[e,m]),w=h(()=>{var t;return(t=s==null?void 0:s.slice((u-1)*f,u*f))!==null&&t!==void 0?t:[]},[s,u]);V(()=>{E(1)},[m]);const C=h(()=>Object.entries(z(e!=null?e:[],t=>t.label.split("/")[0])).sort(([t],[c])=>{const l=t.toUpperCase(),_=c.toUpperCase();return l<_?-1:l>_?1:0}),[e]),L=h(()=>Math.ceil(s.length/f),[s]),O=B((t,c)=>o?a.createElement(ee,null,a.createElement(M,{color:$,width:"20%",height:"4px"})):a.createElement(X,null,t.length?t.map((l,_)=>{var y,P;const R=Symbol(l.label);return a.createElement(Y,{cid:R,key:l.id||l.label,width:(y=n==null?void 0:n.width)!==null&&y!==void 0?y:r(430),height:(P=n==null?void 0:n.height)!==null&&P!==void 0?P:r(337)},i==null?void 0:i(U(U({},l),{},{cid:R}),_))}):a.createElement(I,{height:r(500)},c?a.createElement(S,{i18nKey:"common:search-empty"},"Nothing found. Please try again with another word.",a.createElement("br",null),"Or you can ",a.createElement("a",{onClick:()=>v("")},"see all charts"),"."):d("common:empty"))),[i,o,n,d]);return a.createElement("div",{className:g},a.createElement(Z,null,a.createElement(F,{placeholder:d("common:search-tags"),rounded:!0,value:b,onChange:t=>v(t)})),m?a.createElement(k,{title:d("common:search-result"),total:s.length},O(w,!0),w.length?a.createElement(Q,{page:u,total:L,onChange:E}):null):C.length?C.map((t,c)=>a.createElement(k,{title:t[0],key:t[0],total:t[1].length,opened:c===0},O(t[1]))):a.createElement(I,{height:`calc(100vh - ${K} - ${r(96)})`},a.createElement(S,{i18nKey:"common:unselected-empty"},"Nothing selected.",a.createElement("br",null),"Please select display data from right side.")))};export default te;
