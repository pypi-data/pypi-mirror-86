function A(e,o){if(e==null)return{};var t=j(e,o),i,r;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++){if(i=n[r],o.indexOf(i)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,i))continue;t[i]=e[i]}}return t}function j(e,o){if(e==null)return{};var t={},i=Object.keys(e),r,n;for(n=0;n<i.length;n++){if(r=i[n],o.indexOf(r)>=0)continue;t[r]=e[r]}return t}import*as g from"../utils/chart.js";import u,{useEffect as I,useImperativeHandle as R}from"../../web_modules/react.js";import{primaryColor as S}from"../utils/style.js";import N,{Wrapper as P,useChartTheme as C}from"../hooks/useECharts.js";import T from"../../web_modules/react-spinners/GridLoader.js";import c from"../../web_modules/lodash/defaultsDeep.js";import{formatTime as _}from"../utils/index.js";import{useTranslation as U}from"../../web_modules/react-i18next.js";export let XAxisType;(function(e){e.value="value",e.log="log",e.time="time"})(XAxisType||(XAxisType={}));export let YAxisType;(function(e){e.value="value",e.log="log"})(YAxisType||(YAxisType={}));const W=u.forwardRef(({options:e,data:o,title:t,loading:i,zoom:r,className:n,onInit:y},b)=>{const{i18n:d}=U(),{ref:x,echart:s,wrapper:w,saveAsImage:L}=N({loading:!!i,zoom:r,autoFit:!0,onInit:y}),v=C();return R(b,()=>({restore:()=>{s==null||s.dispatchAction({type:"restore"})},saveAsImage:()=>{L(t)}})),I(()=>{var p,m;const{color:k,colorAlt:D,series:O}=g,E=A(g,["color","colorAlt","series"]);let l=c({title:{text:t!=null?t:""},series:o==null?void 0:o.map(a=>{var f,h;return c({showSymbol:((f=a==null||((h=a.data)===null||h===void 0)?void 0:h.length)!==null&&f!==void 0?f:0)<=1,type:"line"},a,O)})},e,v,E);((p=l)===null||p===void 0?void 0:p.xAxis).type==="time"&&(l=c({xAxis:{axisLabel:{formatter:a=>_(a,d.language,"LTS")}}},l)),((m=l)===null||m===void 0?void 0:m.yAxis).type==="time"&&(l=c({yAxis:{axisLabel:{formatter:a=>_(a,d.language,"LTS")}}},l)),s==null||s.setOption(l,{notMerge:!0})},[e,o,t,v,d.language,s]),u.createElement(P,{ref:w,className:n},!s&&u.createElement("div",{className:"loading"},u.createElement(T,{color:S,size:"10px"})),u.createElement("div",{className:"echarts",ref:x}))});export default W;
