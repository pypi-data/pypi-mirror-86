let P=t=>t,R;import o,{useCallback as _,useEffect as f,useState as g}from"../../../web_modules/react.js";import{css as j,ellipsis as x,em as e,rem as I,sameBorder as v,size as F,transitionProps as y,triangle as T}from"../../utils/style.js";import O from"../Field.js";import z from"../SearchInput.js";import c from"../../../web_modules/styled-components.js";import A from"../../hooks/useSearchValue.js";import{useTranslation as W}from"../../../web_modules/react-i18next.js";const B=c(O).withConfig({displayName:"Search__SearchField",componentId:"sc-14cp3it-0"})(["margin-bottom:",";display:flex;justify-content:space-between;align-items:center;>:first-child{flex:auto;}> a:last-child{color:var(--primary-color);cursor:pointer;margin-left:",";flex:none;","}"],I(20),I(10),y("color")),V=c.div.withConfig({displayName:"Search__Empty",componentId:"sc-14cp3it-1"})(["padding:"," 0;text-align:center;color:var(--text-light-color);",""],I(100),y("color")),X=c.div.withConfig({displayName:"Search__Wrapper",componentId:"sc-14cp3it-2"})(["overflow:auto;"]),Y=c.ul.withConfig({displayName:"Search__List",componentId:"sc-14cp3it-3"})(["list-style:none;margin:0;padding:0;"]),q=c.li.withConfig({displayName:"Search__Item",componentId:"sc-14cp3it-4"})(["padding:"," ",";cursor:pointer;width:100%;background-color:var(--background-color);display:flex;align-items:center;"," > span{flex:auto;margin-left:",";","}&:hover{background-color:var(--background-focused-color);}"],e(10),e(12),y("background-color"),e(10),x()),E=j(R||(R=P`
    color: #979797;
    flex: none;
    width: ${0};
`),e(8)),N=c.i.withConfig({displayName:"Search__EdgeIcon",componentId:"sc-14cp3it-5"})([""," position:relative;height:",";overflow:hidden;&::before{content:'';display:block;"," background-color:currentColor;position:absolute;top:0;left:50%;transform:translateX(-50%);}&::after{content:'';display:block;"," position:absolute;top:",";left:50%;transform:translateX(-50%);}"],E,e(11),F(e(6),e(1)),T({pointingDirection:"bottom",height:e(5),width:e(7),foregroundColor:"currentColor"}),e(6)),H=c.i.withConfig({displayName:"Search__NodeIcon",componentId:"sc-14cp3it-6"})([""," height:",";"," background-color:#f7f7f7;"],E,e(7),v({radius:e(2),color:"currentColor"})),K=c.i.withConfig({displayName:"Search__InitializerIcon",componentId:"sc-14cp3it-7"})([""," height:",";"," background-color:#f7f7f7;"],E,e(8),v({radius:e(4),color:"currentColor"})),$={input:N,output:N,node:H,initializer:K},G=({text:t,data:l,onChange:n,onSelect:s,onActive:a,onDeactive:r})=>{const{t:m}=W(["graph","common"]),[d,p]=g(t!=null?t:""),[u,h]=g(!1),[b,S]=g(l.result),w=A(d);f(()=>p(t!=null?t:""),[t]),f(()=>{u?n==null||n(w):S([])},[w,u,n]),f(()=>{l.text===d&&S(l.result)},[l,d]);const k=_(()=>{h(!0),a==null||a()},[a]),C=_(()=>{p(""),n==null||n(""),h(!1),r==null||r()},[n,r]),U=_(i=>{p(i.name),s==null||s(i),h(!1),r==null||r()},[s,r]);return o.createElement(o.Fragment,null,o.createElement(B,null,o.createElement(z,{placeholder:m("common:search"),value:d,onChange:p,onFocus:k}),u&&o.createElement("a",{onClick:C},m("common:cancel"))),u&&(b.length?o.createElement(X,null,o.createElement(Y,null,b.map(i=>{const L=$[i.type];return o.createElement(q,{key:i.id,onClick:()=>U(i),title:i.name},o.createElement(L,null),o.createElement("span",null,i.name))}))):o.createElement(V,null,m("graph:nothing-matched"))))};export default G;
