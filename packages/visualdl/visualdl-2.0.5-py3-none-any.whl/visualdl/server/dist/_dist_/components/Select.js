let q=o=>o,E;import l,{useCallback as m,useEffect as P,useMemo as _,useState as L}from"../../web_modules/react.js";import{borderRadius as z,borderRadiusShortHand as R,css as B,ellipsis as N,em as b,math as M,sameBorder as W,size as I,transitionProps as u,zIndexes as D}from"../utils/style.js";import F from"./Checkbox.js";import H from"./Icon.js";import a from"../../web_modules/styled-components.js";import Y from"../hooks/useClickOutside.js";import{useTranslation as K}from"../../web_modules/react-i18next.js";import G from"../../web_modules/lodash/without.js";export const padding=b(10),height=b(36);const J=a.div.withConfig({displayName:"Select__Wrapper",componentId:"sc-1rc4rcq-0"})(["height:",";line-height:calc("," - 2px);max-width:100%;display:inline-block;position:relative;background-color:var(--background-color);"," "," "," &:hover{border-color:var(--border-focused-color);}"],height,height,W({radius:!0}),o=>o.opened?R("bottom","0"):"",u("border-color","background-color")),Q=a.div.withConfig({displayName:"Select__Trigger",componentId:"sc-1rc4rcq-1"})(["padding:",";display:inline-flex;"," justify-content:space-between;align-items:center;cursor:pointer;"," ",""],padding,I("100%"),o=>o.selected?"":"color: var(--text-lighter-color)",u("color")),X=a(H).withConfig({displayName:"Select__TriggerIcon",componentId:"sc-1rc4rcq-2"})([""," text-align:center;display:block;flex-shrink:0;transform:rotate(","deg) scale(",");",""],I(b(14)),o=>o.opened?"180":"0",10/14,u("transform")),Z=a.span.withConfig({displayName:"Select__Label",componentId:"sc-1rc4rcq-3"})(["flex-grow:1;padding-right:",";",""],b(10),N()),V=a.div.withConfig({displayName:"Select__List",componentId:"sc-1rc4rcq-4"})(["position:absolute;top:100%;width:calc(100% + 2px);max-height:",";overflow-x:hidden;overflow-y:auto;left:-1px;padding:"," 0;border:inherit;border-top-color:var(--border-color);"," display:",";z-index:",";line-height:1;background-color:inherit;box-shadow:0 5px 6px 0 rgba(0,0,0,0.05);"," ",""],M(`4.35 * ${height} + 2 * ${padding}`),padding,R("bottom",z),o=>o.opened?"block":"none",D.component,u(["border-color","color"]),o=>o.empty?{color:"var(--text-lighter-color)",textAlign:"center"}:""),A=B(E||(E=q`
    display: block;
    cursor: pointer;
    padding: 0 ${0};
    ${0}
    line-height: ${0};
    ${0}

    &:hover {
        background-color: var(--background-focused-color);
    }
`),padding,I(height,"100%"),height,u(["color","background-color"])),ee=a.div.withConfig({displayName:"Select__ListItem",componentId:"sc-1rc4rcq-5"})([""," "," ",""],N(),A,o=>o.selected?"color: var(--select-selected-text-color);":""),oe=a(F).withConfig({displayName:"Select__MultipleListItem",componentId:"sc-1rc4rcq-6"})([""," display:flex;align-items:center;"],A),te=({list:o,value:s,placeholder:x,multiple:n,className:C,onChange:c})=>{const{t:f}=K("common"),[d,k]=L(!1),O=m(()=>k(!d),[d]),v=m(()=>k(!1),[]),[i,g]=L(n?Array.isArray(s)?s:[]:s);P(()=>g(n?Array.isArray(s)?s:[]:s),[n,s,g]);const h=_(()=>!!(n?i&&i.length!==0:i),[n,i]),j=m(e=>{g(e),c==null||c(e),v()},[v,c]),$=m((e,r)=>{let t=i;r?t.includes(e)||(t=[...t,e]):t.includes(e)&&(t=G(t,e)),g(t),c==null||c(t)},[i,c]),T=Y(v),p=_(()=>{var e;return(e=o==null?void 0:o.map(r=>["string","number"].includes(typeof r)?{value:r,label:r+""}:r))!==null&&e!==void 0?e:[]},[o]),S=_(()=>p.length===0,[p]),y=m(e=>{var r,t;return(r=(t=p.find(U=>U.value===e))===null||t===void 0?void 0:t.label)!==null&&r!==void 0?r:""},[p]),w=_(()=>h?n?i.map(y).join(" / "):y(i):x||f("common:select"),[n,i,y,h,x,f]);return l.createElement(J,{ref:T,opened:d,className:C},l.createElement(Q,{onClick:O,selected:h,title:h&&w?String(w):""},l.createElement(Z,null,w),l.createElement(X,{opened:d,type:"chevron-down"})),l.createElement(V,{opened:d,empty:S},S?f("common:empty"):p.map((e,r)=>n?l.createElement(oe,{value:i.includes(e.value),key:r,title:e.label,size:"small",onChange:t=>$(e.value,t)},e.label):l.createElement(ee,{selected:e.value===i,key:r,title:e.label,onClick:()=>j(e.value)},e.label))))};export default te;
