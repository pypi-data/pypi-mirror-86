import p from"../../components/ChartPage.js";import e,{useCallback as g,useEffect as _,useMemo as R,useRef as C,useState as f}from"../../../web_modules/react.js";import E from"../../components/SamplePage/AudioChart.js";import w from"../../components/Content.js";import A from"../../components/Error.js";import S from"../../components/RunAside.js";import x from"../../components/Title.js";import{rem as b}from"../../utils/style.js";import j from"../../hooks/useTagFilter.js";import{useTranslation as P}from"../../../web_modules/react-i18next.js";const T={height:b(244)},I=()=>{const{t:a}=P(["sample","common"]),i=C();_(()=>{const s=window.AudioContext||window.webkitAudioContext;return i.current=new s,()=>{var n;(n=i.current)===null||n===void 0||n.close()}},[]);const[t,l]=f(!0),{runs:o,tagsWithSingleRun:m,selectedRuns:u,onChangeRuns:c,loading:r}=j("audio",t),d=R(()=>o.length?e.createElement(S,{runs:o,selectedRuns:u,onChangeRuns:c,running:t,onToggleRunning:l}):null,[c,t,o,u]),h=g(({run:s,label:n})=>e.createElement(E,{audioContext:i.current,run:s,tag:n,running:t}),[t]);return e.createElement(e.Fragment,null,e.createElement(x,null,a("common:sample")," - ",a("common:audio")),e.createElement(w,{aside:d,loading:r},!r&&!o.length?e.createElement(A,null):e.createElement(p,{items:m,chartSize:T,withChart:h,loading:r})))};export default I;
