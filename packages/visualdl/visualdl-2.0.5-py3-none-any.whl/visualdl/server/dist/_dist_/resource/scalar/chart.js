import{format as x}from"../../../web_modules/d3-format.js";import{formatTime as w}from"../../utils/index.js";import N from"../../../web_modules/moment.js";import{xAxisMap as m}from"./index.js";const c=x(".5"),g=n=>{const a=N.duration(n),e=a.hours();e&&a.subtract(e,"hour");const o=a.minutes();o&&a.subtract(o,"minute");const l=a.asSeconds();let t=Math.floor(l)+"s";return e?t=`${e}h${o}m${t}`:o&&(t=`${o}m${t}`),t};export const options={legend:{data:[]},tooltip:{position:["10%","100%"]}},chartData=({data:n,ranges:a,runs:e,xAxis:o,smoothedOnly:l})=>n.map((t,i)=>{const r=e[i].label,b=e[i].colors[0],d=e[i].colors[1],f=[{name:r,z:e.length+i,itemStyle:{color:b},lineStyle:{color:b},data:t,encode:{x:[m[o]],y:[3]}}];if(!l){const s=a[i],u=t.find(p=>p[2]===(s==null?void 0:s.min)),h=t.find(p=>p[2]===(s==null?void 0:s.max));f.push({name:r,z:i,itemStyle:{color:d},lineStyle:{color:d},data:t,encode:{x:[m[o]],y:[2]},markPoint:{symbol:"circle",symbolSize:6,itemStyle:{color:"#fff",borderColor:d,borderWidth:1},label:{show:!1},data:[...u?[{coord:[u[m[o]],u[2]]}]:[],...h?[{coord:[h[m[o]],h[2]]}]:[]]}})}return f}).flat(),tooltip=(n,a,e)=>({columns:[{label:e.t("scalar:smoothed"),width:"5em"},{label:e.t("scalar:value"),width:"4.285714286em"},{label:e.t("common:time-mode.step"),width:`${Math.max(a*.571428571,2.857142857)}em`},{label:e.t("scalar:min"),width:"4.285714286em"},{label:e.t("scalar:max"),width:"4.285714286em"},{label:e.t("common:time-mode.wall"),width:"10.714285714em"},{label:e.t("common:time-mode.relative"),width:"4.285714286em"}],data:n.map(({min:o,max:l,item:t})=>{var i,r;return[c((i=t[3])!==null&&i!==void 0?i:Number.NaN),c((r=t[2])!==null&&r!==void 0?r:Number.NaN),t[1],c(o!=null?o:Number.NaN),c(l!=null?l:Number.NaN),w(t[0],e.language),g(t[4])]})});
