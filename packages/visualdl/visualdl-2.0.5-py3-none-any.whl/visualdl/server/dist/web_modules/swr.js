import"./common/_commonjsHelpers-2c0027bd.js";import{r as w}from"./common/index-6f180876.js";var B=Array.isArray,ee=Object.keys,oe=Object.prototype.hasOwnProperty,ue=function u(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){var o=B(r),a=B(t),e,s,i;if(o&&a){if(s=r.length,s!=t.length)return!1;for(e=s;e--!==0;)if(!u(r[e],t[e]))return!1;return!0}if(o!=a)return!1;var d=r instanceof Date,n=t instanceof Date;if(d!=n)return!1;if(d&&n)return r.getTime()==t.getTime();var f=r instanceof RegExp,g=t instanceof RegExp;if(f!=g)return!1;if(f&&g)return r.toString()==t.toString();var b=ee(r);if(s=b.length,s!==ee(t).length)return!1;for(e=s;e--!==0;)if(!oe.call(t,b[e]))return!1;for(e=s;e--!==0;)if(i=b[e],!u(r[i],t[i]))return!1;return!0}return r!==r&&t!==t};function H(){return typeof document!="undefined"&&typeof document.visibilityState!="undefined"?document.visibilityState!=="hidden":!0}var F=new WeakMap,te=0;function se(u){if(!u.length)return"";for(var r="arg",t=0;t<u.length;++t){var o=void 0;u[t]===null||typeof u[t]!="object"?typeof u[t]=="string"?o='"'+u[t]+'"':o=String(u[t]):F.has(u[t])?o=F.get(u[t]):(o=te,F.set(u[t],te++)),r+="@"+o}return r}var fe=function(){function u(r){r===void 0&&(r={}),this.__cache=new Map(Object.entries(r)),this.__listeners=[]}return u.prototype.get=function(r){var t=this.serializeKey(r)[0];return this.__cache.get(t)},u.prototype.set=function(r,t){var o=this.serializeKey(r)[0];this.__cache.set(o,t),this.notify()},u.prototype.keys=function(){return Array.from(this.__cache.keys())},u.prototype.has=function(r){var t=this.serializeKey(r)[0];return this.__cache.has(t)},u.prototype.clear=function(){this.__cache.clear(),this.notify()},u.prototype.delete=function(r){var t=this.serializeKey(r)[0];this.__cache.delete(t),this.notify()},u.prototype.serializeKey=function(r){var t=null;if(typeof r=="function")try{r=r()}catch(a){r=""}Array.isArray(r)?(t=r,r=se(r)):r=String(r||"");var o=r?"err@"+r:"";return[r,t,o]},u.prototype.subscribe=function(r){var t=this;if(typeof r!="function")throw new Error("Expected the listener to be a function.");var o=!0;return this.__listeners.push(r),function(){if(!o)return;o=!1;var a=t.__listeners.indexOf(r);a>-1&&(t.__listeners[a]=t.__listeners[t.__listeners.length-1],t.__listeners.length--)}},u.prototype.notify=function(){for(var r=0,t=this.__listeners;r<t.length;r++){var o=t[r];o()}},u}(),v=new fe;function ce(u,r,t,o,a){if(!H())return;if(typeof t.errorRetryCount=="number"&&a.retryCount>t.errorRetryCount)return;var e=Math.min(a.retryCount||0,8),s=~~((Math.random()+.5)*(1<<e))*t.errorRetryInterval;setTimeout(o,s,a)}var re=typeof window!="undefined"&&navigator.connection&&["slow-2g","2g"].indexOf(navigator.connection.effectiveType)!==-1,le={onLoadingSlow:function(){},onSuccess:function(){},onError:function(){},onErrorRetry:ce,errorRetryInterval:(re?10:5)*1e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:(re?5:3)*1e3,refreshInterval:0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1,shouldRetryOnError:!0,suspense:!1,compare:ue};function ne(){return typeof navigator.onLine!="undefined"?navigator.onLine:!0}function de(u,r){var t=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(t)return;t=!0,u.apply(void 0,o),setTimeout(function(){return t=!1},r)}}var G=w.createContext({});G.displayName="SWRConfigContext";var $=function(u,r,t,o){function a(e){return e instanceof t?e:new t(function(s){s(e)})}return new(t||(t=Promise))(function(e,s){function i(f){try{n(o.next(f))}catch(g){s(g)}}function d(f){try{n(o.throw(f))}catch(g){s(g)}}function n(f){f.done?e(f.value):a(f.value).then(i,d)}n((o=o.apply(u,r||[])).next())})},J=function(u,r){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},o,a,e,s;return s={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function i(n){return function(f){return d([n,f])}}function d(n){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,a&&(e=n[0]&2?a.return:n[0]?a.throw||((e=a.return)&&e.call(a),0):a.next)&&!(e=e.call(a,n[1])).done)return e;(a=0,e)&&(n=[n[0]&2,e.value]);switch(n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,a=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(!(e=t.trys,e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=r.call(u,t)}catch(f){n=[6,f],a=0}finally{o=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},Q=typeof window=="undefined",he=Q?null:window.requestIdleCallback||function(u){return setTimeout(u,1)},ae=Q?w.useEffect:w.useLayoutEffect,k={},T={},W={},X={},q={},V={},P={};if(!Q&&window.addEventListener){var Y=function(u){if(!H()||!ne())return;for(var r in u)u[r][0]&&u[r][0]()};window.addEventListener("visibilitychange",function(){return Y(W)},!1),window.addEventListener("focus",function(){return Y(W)},!1),window.addEventListener("online",function(){return Y(X)},!1)}var ve=function(u,r){r===void 0&&(r=!0);var t=v.serializeKey(u),o=t[0],a=t[2];if(!o)return Promise.resolve();var e=q[o];if(o&&e){for(var s=v.get(o),i=v.get(a),d=[],n=0;n<e.length;++n)d.push(e[n](r,s,i,n>0));return Promise.all(d).then(function(){return v.get(o)})}return Promise.resolve(v.get(o))},ie=function(u,r,t){var o=q[u];if(u&&o)for(var a=0;a<o.length;++a)o[a](!1,r,t)},ye=function(u,r,t){return t===void 0&&(t=!0),$(void 0,void 0,void 0,function(){var o,a,e,s,i,d,n,f,g,b,p,C;return J(this,function(y){switch(y.label){case 0:if(o=v.serializeKey(u),a=o[0],e=o[2],!a)return[2];if(typeof r=="undefined")return[2,ve(u,t)];if(V[a]=Date.now()-1,P[a]=0,s=V[a],i=T[a],!(r&&typeof r=="function"))return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,r(v.get(a))];case 2:return d=y.sent(),[3,4];case 3:return f=y.sent(),n=f,[3,4];case 4:return[3,11];case 5:if(!(r&&typeof r.then=="function"))return[3,10];y.label=6;case 6:return y.trys.push([6,8,,9]),[4,r];case 7:return d=y.sent(),[3,9];case 8:return g=y.sent(),n=g,[3,9];case 9:return[3,11];case 10:d=r,y.label=11;case 11:if(s!==V[a]||i!==T[a]){if(n)throw n;return[2,d]}if(typeof d!="undefined"&&v.set(a,d),v.set(e,n),P[a]=Date.now()-1,b=q[a],b){for(p=[],C=0;C<b.length;++C)p.push(b[C](!!t,d,n,C>0));return[2,Promise.all(p).then(function(){if(n)throw n;return v.get(a)})]}if(n)throw n;return[2,d]}})})};function ge(){for(var u=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o,a,e={};r.length>=1&&(o=r[0]),r.length>2?(a=r[1],e=r[2]):typeof r[1]=="function"?a=r[1]:typeof r[1]=="object"&&(e=r[1]);var s=v.serializeKey(o),i=s[0],d=s[1],n=s[2];e=Object.assign({},le,w.useContext(G),e),typeof a=="undefined"&&(a=e.fetcher);var f=v.get(i)||e.initialData,g=v.get(n),b=w.useRef({data:!1,error:!1,isValidating:!1}),p=w.useRef({data:f,error:g,isValidating:!1}),C=w.useState(null)[1],y=w.useCallback(function(c){var h=!1;for(var l in c)p.current[l]=c[l],b.current[l]&&(h=!0);if(h||e.suspense){if(x.current)return;C({})}},[]),x=w.useRef(!1),A=w.useRef(i),D=w.useRef({emit:function(c){for(var h=[],l=1;l<arguments.length;l++)h[l-1]=arguments[l];if(x.current)return;e[c].apply(e,h)}}),Z=w.useCallback(function(c,h){return ye(i,c,h)},[i]),K=function(c,h){if(!h)return;c[i]?c[i].push(h):c[i]=[h]},N=function(c,h){if(c[i]){var l=c[i],m=l.indexOf(h);m>=0&&(l[m]=l[l.length-1],l.pop())}},E=w.useCallback(function(c){return c===void 0&&(c={}),$(u,void 0,void 0,function(){var h,l,m,S,I,_,O,j;return J(this,function(R){switch(R.label){case 0:if(!i||!a)return[2,!1];if(x.current)return[2,!1];c=Object.assign({dedupe:!1},c),h=!0,l=typeof k[i]!="undefined"&&c.dedupe,R.label=1;case 1:return R.trys.push([1,6,,7]),y({isValidating:!0}),m=void 0,S=void 0,l?(S=T[i],[4,k[i]]):[3,3];case 2:return m=R.sent(),[3,5];case 3:return e.loadingTimeout&&!v.get(i)&&setTimeout(function(){h&&D.current.emit("onLoadingSlow",i,e)},e.loadingTimeout),d!==null?k[i]=a.apply(void 0,d):k[i]=a(i),T[i]=S=Date.now(),[4,k[i]];case 4:m=R.sent(),setTimeout(function(){delete k[i],delete T[i]},e.dedupingInterval),D.current.emit("onSuccess",m,i,e),R.label=5;case 5:return I=T[i]>S||V[i]&&(S<=V[i]||S<=P[i]||P[i]===0),I?(y({isValidating:!1}),[2,!1]):(v.set(i,m),v.set(n,void 0),_={isValidating:!1},typeof p.current.error!="undefined"&&(_.error=void 0),e.compare(p.current.data,m)||(_.data=m),y(_),l||ie(i,m,void 0),[3,7]);case 6:return O=R.sent(),delete k[i],delete T[i],v.set(n,O),p.current.error!==O&&(y({isValidating:!1,error:O}),l||ie(i,void 0,O)),D.current.emit("onError",O,i,e),e.shouldRetryOnError&&(j=(c.retryCount||0)+1,D.current.emit("onErrorRetry",O,i,e,E,Object.assign({dedupe:!0},c,{retryCount:j}))),[3,7];case 7:return h=!1,[2,!0]}})})},[i]);if(ae(function(){if(!i)return;x.current=!1;var c=p.current.data,h=v.get(i)||e.initialData;(A.current!==i||!e.compare(c,h))&&(y({data:h}),A.current=i);var l=function(){return E({dedupe:!0})};(e.revalidateOnMount||!e.initialData&&e.revalidateOnMount===void 0)&&(typeof h!="undefined"?he(l):l());var m;e.revalidateOnFocus&&(m=de(l,e.focusThrottleInterval));var S;e.revalidateOnReconnect&&(S=l);var I=function(_,O,j,R){_===void 0&&(_=!0),R===void 0&&(R=!0);var z={},U=!1;return typeof O!="undefined"&&!e.compare(p.current.data,O)&&(z.data=O,U=!0),p.current.error!==j&&(z.error=j,U=!0),U&&y(z),_?R?l():E():!1};return K(W,m),K(X,S),K(q,I),function(){y=function(){return null},x.current=!0,N(W,m),N(X,S),N(q,I)}},[i,E]),ae(function(){var c=null,h=function(){return $(u,void 0,void 0,function(){return J(this,function(l){switch(l.label){case 0:return!p.current.error&&(e.refreshWhenHidden||H())&&(e.refreshWhenOffline||ne())?[4,E({dedupe:!0})]:[3,2];case 1:l.sent(),l.label=2;case 2:return e.refreshInterval&&(c=setTimeout(h,e.refreshInterval)),[2]}})})};return e.refreshInterval&&(c=setTimeout(h,e.refreshInterval)),function(){c&&clearTimeout(c)}},[e.refreshInterval,e.refreshWhenHidden,e.refreshWhenOffline,E]),e.suspense){var L=v.get(i)||f,M=v.get(n)||g;if(typeof L=="undefined"&&typeof M=="undefined"){if(k[i]||E(),k[i]&&typeof k[i].then=="function")throw k[i];L=k[i]}if(typeof L=="undefined"&&M)throw M;return{error:M,data:L,revalidate:E,mutate:Z,isValidating:p.current.isValidating}}return w.useMemo(function(){var c={revalidate:E,mutate:Z};return Object.defineProperties(c,{error:{get:function(){return b.current.error=!0,A.current===i?p.current.error:g},enumerable:!0},data:{get:function(){return b.current.data=!0,A.current===i?p.current.data:f},enumerable:!0},isValidating:{get:function(){return b.current.isValidating=!0,p.current.isValidating},enumerable:!0}}),c},[E])}var pe=G.Provider,ke=function(u,r,t,o){function a(e){return e instanceof t?e:new t(function(s){s(e)})}return new(t||(t=Promise))(function(e,s){function i(f){try{n(o.next(f))}catch(g){s(g)}}function d(f){try{n(o.throw(f))}catch(g){s(g)}}function n(f){f.done?e(f.value):a(f.value).then(i,d)}n((o=o.apply(u,r||[])).next())})},Oe=function(u,r){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},o,a,e,s;return s={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function i(n){return function(f){return d([n,f])}}function d(n){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,a&&(e=n[0]&2?a.return:n[0]?a.throw||((e=a.return)&&e.call(a),0):a.next)&&!(e=e.call(a,n[1])).done)return e;(a=0,e)&&(n=[n[0]&2,e.value]);switch(n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,a=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(!(e=t.trys,e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=r.call(u,t)}catch(f){n=[6,f],a=0}finally{o=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},Re=function(u,r){var t={};for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&r.indexOf(o)<0&&(t[o]=u[o]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(u);a<o.length;a++)r.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(u,o[a])&&(t[o[a]]=u[o[a]]);return t};export default ge;export{pe as SWRConfig,v as cache};
