

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Customization &mdash; Django Grappelli 2.14.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dashboard Setup" href="dashboard_setup.html" />
    <link rel="prev" title="Quick start guide" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Django Grappelli
          

          
          </a>

          
            
            
              <div class="version">
                2.14.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Customization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#available-settings">Available Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collapsibles">Collapsibles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inline-sortables">Inline Sortables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#grappellisortablehiddenmixin">GrappelliSortableHiddenMixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sortable-excludes">Sortable Excludes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rearrange-inlines">Rearrange Inlines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#related-lookups">Related Lookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#autocomplete-lookups">Autocomplete Lookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-tinymce">Using TinyMCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changelist-templates">Changelist Templates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filters-as-drop-down-automatically-applied-default-template">Filters as drop-down, automatically applied (default template)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filters-as-drop-down-manually-applied">Filters as drop-down, manually applied</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filters-in-a-sidebar-automatically-applied">Filters in a sidebar, automatically applied</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filters-in-a-sidebar-manually-applied">Filters in a sidebar, manually applied</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#changelist-filters">Changelist Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#switch-user">Switch User</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clean-input-types">Clean input types</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dashboard_setup.html">Dashboard Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard_api.html">Dashboard API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Django Grappelli</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Customization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/customization.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="customization">
<span id="id1"></span><h1>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h1>
<p>While Grappelli is mainly about the look &amp; feel of the admin interface, it also adds some features.</p>
<div class="section" id="available-settings">
<span id="customizationsettings"></span><h2>Available Settings<a class="headerlink" href="#available-settings" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">GRAPPELLI_ADMIN_TITLE</span></code></dt><dd><p>The Site Title of your admin interface. Change this instead of changing index.html.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRAPPELLI_AUTOCOMPLETE_LIMIT</span></code></dt><dd><p>Number of items to show with autocomplete drop–downs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRAPPELLI_AUTOCOMPLETE_SEARCH_FIELDS</span></code></dt><dd><p>A dictionary containing search patterns for models you cannot (or should not) alter.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRAPPELLI_SWITCH_USER</span></code></dt><dd><p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if you want to activate the switch user functionality.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRAPPELLI_SWITCH_USER_ORIGINAL</span></code></dt><dd><p>A function which defines if a User is able to switch to another User (returns either <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>).
Defaults to all superusers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRAPPELLI_SWITCH_USER_TARGET</span></code></dt><dd><p>A function which defines if a User is a valid switch target (returns either <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>).
Defaults to all staff users, excluding superusers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GRAPPELLI_CLEAN_INPUT_TYPES</span></code></dt><dd><p>Replaces HTML5 input types (search, email, url, tel, number, range, date, month, week, time, datetime, datetime-local, color) due to browser inconsistencies. Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> in order to not replace the mentioned input types.</p>
</dd>
</dl>
</div>
<div class="section" id="collapsibles">
<span id="customizationcollapsibles"></span><h2>Collapsibles<a class="headerlink" href="#collapsibles" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">classes</span></code> property in order to define collapsibles for a <a class="reference external" href="http://docs.djangoproject.com/en/1.11/ref/contrib/admin/#modeladmin-objects">ModelAdmin</a> or an <a class="reference external" href="http://docs.djangoproject.com/en/1.11/ref/contrib/admin/#inlinemodeladmin-objects">InlineModelAdmin</a>. Possible values are <code class="docutils literal notranslate"><span class="pre">grp-collapse</span> <span class="pre">grp-open</span></code> and <code class="docutils literal notranslate"><span class="pre">grp-collapse</span> <span class="pre">grp-closed</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;subtitle&#39;</span><span class="p">,</span> <span class="s1">&#39;slug&#39;</span><span class="p">,</span> <span class="s1">&#39;pub_date&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,),</span>
        <span class="p">}),</span>
        <span class="p">(</span><span class="s1">&#39;Flags&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;classes&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;grp-collapse grp-closed&#39;</span><span class="p">,),</span>
            <span class="s1">&#39;fields&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;flag_front&#39;</span><span class="p">,</span> <span class="s1">&#39;flag_sticky&#39;</span><span class="p">,</span> <span class="s1">&#39;flag_allow_comments&#39;</span><span class="p">,</span> <span class="s1">&#39;flag_comments_closed&#39;</span><span class="p">,),</span>
        <span class="p">}),</span>
        <span class="p">(</span><span class="s1">&#39;Tags&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;classes&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;grp-collapse grp-open&#39;</span><span class="p">,),</span>
            <span class="s1">&#39;fields&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,),</span>
        <span class="p">}),</span>
    <span class="p">)</span>

<span class="k">class</span> <span class="nc">StackedItemInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">StackedInline</span><span class="p">):</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;grp-collapse grp-open&#39;</span><span class="p">,)</span>

<span class="k">class</span> <span class="nc">TabularItemInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;grp-collapse grp-open&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>With <a class="reference external" href="https://docs.djangoproject.com/en/1.11/ref/contrib/admin/#django.contrib.admin.StackedInline">StackedInlines</a>, an additional property <code class="docutils literal notranslate"><span class="pre">inline_classes</span></code> is available to define the default collapsible state of inline items (as opposed to the inline group):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StackedItemInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">StackedInline</span><span class="p">):</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;grp-collapse grp-open&#39;</span><span class="p">,)</span>
    <span class="n">inline_classes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;grp-collapse grp-open&#39;</span><span class="p">,)</span>
</pre></div>
</div>
</div>
<div class="section" id="inline-sortables">
<span id="customizationinlinessortables"></span><h2>Inline Sortables<a class="headerlink" href="#inline-sortables" title="Permalink to this headline">¶</a></h2>
<p>For using drag/drop with inlines, you need to add a <code class="docutils literal notranslate"><span class="pre">PositiveIntegerField</span></code> to your Model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyInlineModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">mymodel</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
    <span class="c1"># position field</span>
    <span class="n">position</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span><span class="s2">&quot;Position&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Now, define the <code class="docutils literal notranslate"><span class="pre">sortable_field_name</span></code> with your <code class="docutils literal notranslate"><span class="pre">InlineModelAdmin</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyInlineModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="o">...</span> <span class="p">,</span> <span class="s2">&quot;position&quot;</span><span class="p">,)</span>
    <span class="c1"># define the sortable</span>
    <span class="n">sortable_field_name</span> <span class="o">=</span> <span class="s2">&quot;position&quot;</span>
</pre></div>
</div>
<p>The inline rows are reordered based on the sortable field (with a templatetag <code class="docutils literal notranslate"><span class="pre">formsetsort</span></code>). When submitting a form, the values of the sortable field are reindexed according to the position of each row.
We loop through each field of each row and check if the field has a value. If at least one value is given for a row, the sortable field is being updated. In order to exclude specific fields from this behaviour, use <a class="reference internal" href="#customizationsortableexcludes"><span class="std std-ref">Sortable Excludes</span></a>.</p>
<p>In case of errors (somewhere within the form), the position of inline rows is preserved. This also applies to rows prepared for deletion while empty rows are being moved to the end of the formset.</p>
<p>Besides using the drag/drop-handler, you are also able to manually update the position values. This is especially useful with lots of inlines. Just change the number within the position field and the row is automatically moved to the new position. Each row is being reindexed with submitting the form.</p>
<div class="section" id="grappellisortablehiddenmixin">
<span id="customizationgrappellisortablehiddenmixin"></span><h3>GrappelliSortableHiddenMixin<a class="headerlink" href="#grappellisortablehiddenmixin" title="Permalink to this headline">¶</a></h3>
<p>There is also <code class="docutils literal notranslate"><span class="pre">GrappelliSortableHiddenMixin</span></code>, which is a Mixin in order to hide the PositionField.
Please note that this Mixin works with a default <code class="docutils literal notranslate"><span class="pre">sortable_field_name</span> <span class="pre">=</span> <span class="pre">&quot;position&quot;</span></code>.
Therefore, you only need to explicitly define the <code class="docutils literal notranslate"><span class="pre">sortable_field_name</span></code> if it’s named differently.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">grappelli.forms</span> <span class="kn">import</span> <span class="n">GrappelliSortableHiddenMixin</span>

<span class="k">class</span> <span class="nc">MyInlineModelOptions</span><span class="p">(</span><span class="n">GrappelliSortableHiddenMixin</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="o">...</span> <span class="p">,</span> <span class="s2">&quot;position&quot;</span><span class="p">,)</span>

<span class="c1"># explicitly defining the sortable is only necessary</span>
<span class="c1"># if the sortable field name is not &#39;position&#39;</span>
<span class="k">class</span> <span class="nc">MyCustomInlineModelOptions</span><span class="p">(</span><span class="n">GrappelliSortableHiddenMixin</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="o">...</span> <span class="p">,</span> <span class="s2">&quot;customposition&quot;</span><span class="p">,)</span>
    <span class="n">sortable_field_name</span> <span class="o">=</span> <span class="s2">&quot;customposition&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="sortable-excludes">
<span id="customizationsortableexcludes"></span><h3>Sortable Excludes<a class="headerlink" href="#sortable-excludes" title="Permalink to this headline">¶</a></h3>
<p>You may want to define <code class="docutils literal notranslate"><span class="pre">sortable_excludes</span></code> (either list or tuple) in order to exclude certain fields from having an effect on the position field. With the example below, the fields <code class="docutils literal notranslate"><span class="pre">field_1</span></code> and <code class="docutils literal notranslate"><span class="pre">field_2</span></code> have default values (so they are not empty with a new inline row). If we do not exclude this fields, the position field is updated for empty rows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyInlineModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="o">...</span> <span class="p">,</span> <span class="s2">&quot;position&quot;</span><span class="p">,)</span>
    <span class="c1"># define the sortable</span>
    <span class="n">sortable_field_name</span> <span class="o">=</span> <span class="s2">&quot;position&quot;</span>
    <span class="c1"># define sortable_excludes</span>
    <span class="n">sortable_excludes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;field_1&quot;</span><span class="p">,</span> <span class="s2">&quot;field_2&quot;</span><span class="p">,)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rearrange-inlines">
<span id="customizationrearrangeinlines"></span><h2>Rearrange Inlines<a class="headerlink" href="#rearrange-inlines" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it might make sense to not show inlines at the bottom of the page/form, but somewhere in–between. In order to achieve this, you need to define a placeholder with your fields/fieldsets in admin.py:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s2">&quot;Some Fieldset&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;grp-collapse grp-open&quot;</span><span class="p">,),</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;whatever&quot;</span><span class="p">,)</span>
<span class="p">}),</span>
<span class="p">(</span><span class="s2">&quot;Image Inlines&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;placeholder images-group&quot;</span><span class="p">,),</span> <span class="s2">&quot;fields&quot;</span> <span class="p">:</span> <span class="p">()}),</span>
<span class="p">(</span><span class="s2">&quot;Another Fieldset&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;grp-collapse grp-open&quot;</span><span class="p">,),</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;whatever&quot;</span><span class="p">,)</span>
<span class="p">}),</span>

<span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ImageInlines</span><span class="p">]</span>
</pre></div>
</div>
<p>The two classes for the placeholder are important. First, you need a class <code class="docutils literal notranslate"><span class="pre">placeholder</span></code>. The second class has to match the <code class="docutils literal notranslate"><span class="pre">id</span></code> of the inline–group.</p>
</div>
<div class="section" id="related-lookups">
<span id="customizationrelatedlookups"></span><h2>Related Lookups<a class="headerlink" href="#related-lookups" title="Permalink to this headline">¶</a></h2>
<p>With Grappelli, you’re able to add the representation of an object beneath the input field (for fk– and m2m–fields):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">related_fk</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">RelatedModel</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Related Lookup (FK)&quot;</span><span class="p">)</span>
    <span class="n">related_m2m</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">RelatedModel</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Related Lookup (M2M)&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="c1"># define the raw_id_fields</span>
    <span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;related_fk&#39;</span><span class="p">,</span><span class="s1">&#39;related_m2m&#39;</span><span class="p">,)</span>
    <span class="c1"># define the related_lookup_fields</span>
    <span class="n">related_lookup_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fk&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;related_fk&#39;</span><span class="p">],</span>
        <span class="s1">&#39;m2m&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;related_m2m&#39;</span><span class="p">],</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>With generic relations, related lookups are defined like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.contenttypes</span> <span class="kn">import</span> <span class="n">generic</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.models</span> <span class="kn">import</span> <span class="n">ContentType</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># first generic relation</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;content_type&quot;</span><span class="p">)</span>
    <span class="n">object_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">content_object</span> <span class="o">=</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericForeignKey</span><span class="p">(</span><span class="s2">&quot;content_type&quot;</span><span class="p">,</span> <span class="s2">&quot;object_id&quot;</span><span class="p">)</span>
    <span class="c1"># second generic relation</span>
    <span class="n">relation_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;relation_type&quot;</span><span class="p">)</span>
    <span class="n">relation_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">relation_object</span> <span class="o">=</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericForeignKey</span><span class="p">(</span><span class="s2">&quot;relation_type&quot;</span><span class="p">,</span> <span class="s2">&quot;relation_id&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="c1"># define the related_lookup_fields</span>
    <span class="n">related_lookup_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;generic&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;content_type&#39;</span><span class="p">,</span> <span class="s1">&#39;object_id&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;relation_type&#39;</span><span class="p">,</span> <span class="s1">&#39;relation_id&#39;</span><span class="p">]],</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>If your generic relation points to a model using a custom primary key, you need to add a property <code class="docutils literal notranslate"><span class="pre">id</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RelationModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">cpk</span>  <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpk</span>
</pre></div>
</div>
<p>For the representation of an object, we first check for a callable <code class="docutils literal notranslate"><span class="pre">related_label</span></code>. If not given, <code class="docutils literal notranslate"><span class="pre">__unicode__</span></code> is being used in Python 2.x or <code class="docutils literal notranslate"><span class="pre">__str__</span></code> in Python 3.x.</p>
<p>Example in Python 2:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">def</span> <span class="nf">related_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
<p>Example in Python 3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">def</span> <span class="nf">related_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to use related lookups, you need to register both ends (models) of the relationship with your <code class="docutils literal notranslate"><span class="pre">admin.site</span></code>.</p>
</div>
</div>
<div class="section" id="autocomplete-lookups">
<span id="customizationautocompletelookups"></span><h2>Autocomplete Lookups<a class="headerlink" href="#autocomplete-lookups" title="Permalink to this headline">¶</a></h2>
<p>Autocomplete lookups are an alternative to related lookups (for foreign keys, many–to-many relations and generic relations).</p>
<p>Add the staticmethod <code class="docutils literal notranslate"><span class="pre">autocomplete_search_fields</span></code> to all models you want to search for:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">autocomplete_search_fields</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;id__iexact&quot;</span><span class="p">,</span> <span class="s2">&quot;name__icontains&quot;</span><span class="p">,)</span>
</pre></div>
</div>
<p>If the staticmethod is not given, <code class="docutils literal notranslate"><span class="pre">GRAPPELLI_AUTOCOMPLETE_SEARCH_FIELDS</span></code> will be used if the app/model is defined:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GRAPPELLI_AUTOCOMPLETE_SEARCH_FIELDS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;mymodel&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;id__iexact&quot;</span><span class="p">,</span> <span class="s2">&quot;name__icontains&quot;</span><span class="p">,)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Defining autocomplete lookups is very similar to related lookups:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">related_fk</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">RelatedModel</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Related Lookup (FK)&quot;</span><span class="p">)</span>
    <span class="n">related_m2m</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">RelatedModel</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Related Lookup (M2M)&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="c1"># define the raw_id_fields</span>
    <span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;related_fk&#39;</span><span class="p">,</span><span class="s1">&#39;related_m2m&#39;</span><span class="p">,)</span>
    <span class="c1"># define the autocomplete_lookup_fields</span>
    <span class="n">autocomplete_lookup_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fk&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;related_fk&#39;</span><span class="p">],</span>
        <span class="s1">&#39;m2m&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;related_m2m&#39;</span><span class="p">],</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>This also works with generic relations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.contenttypes</span> <span class="kn">import</span> <span class="n">generic</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.models</span> <span class="kn">import</span> <span class="n">ContentType</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># first generic relation</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;content_type&quot;</span><span class="p">)</span>
    <span class="n">object_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">content_object</span> <span class="o">=</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericForeignKey</span><span class="p">(</span><span class="s2">&quot;content_type&quot;</span><span class="p">,</span> <span class="s2">&quot;object_id&quot;</span><span class="p">)</span>
    <span class="c1"># second generic relation</span>
    <span class="n">relation_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;relation_type&quot;</span><span class="p">)</span>
    <span class="n">relation_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">relation_object</span> <span class="o">=</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericForeignKey</span><span class="p">(</span><span class="s2">&quot;relation_type&quot;</span><span class="p">,</span> <span class="s2">&quot;relation_id&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="c1"># define the autocomplete_lookup_fields</span>
    <span class="n">autocomplete_lookup_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;generic&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;content_type&#39;</span><span class="p">,</span> <span class="s1">&#39;object_id&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;relation_type&#39;</span><span class="p">,</span> <span class="s1">&#39;relation_id&#39;</span><span class="p">]],</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>If your generic relation points to a model using a custom primary key, you need to add a property <code class="docutils literal notranslate"><span class="pre">id</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RelationModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">cpk</span>  <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpk</span>
</pre></div>
</div>
<p>If the human-readable value of a field you are searching on is too large to be indexed (e.g. long text as SHA key) or is saved in a different format (e.g. date as integer timestamp), add a staticmethod <code class="docutils literal notranslate"><span class="pre">autocomplete_term_adjust</span></code> to the corresponding model with the appropriate transformation and perform the lookup on the indexed field:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;Long text&quot;</span><span class="p">)</span>
    <span class="n">text_hash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;Text hash&quot;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">autocomplete_term_adjust</span><span class="p">(</span><span class="n">term</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span><span class="n">term</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">autocomplete_search_fields</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;text_hash__iexact&quot;</span><span class="p">,)</span>
</pre></div>
</div>
<p>For the representation of an object, we first check for a callable <code class="docutils literal notranslate"><span class="pre">related_label</span></code>. If not given, <code class="docutils literal notranslate"><span class="pre">__unicode__</span></code> is being usedin Python 2.x or <code class="docutils literal notranslate"><span class="pre">__str__</span></code> in Python 3.x.</p>
<p>Example in Python 2:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">def</span> <span class="nf">related_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">u</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
<p>Example in Python 3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">def</span> <span class="nf">related_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to use autocompletes, you need to register both ends (models) of the relationship with your <code class="docutils literal notranslate"><span class="pre">admin.site</span></code>.</p>
</div>
</div>
<div class="section" id="using-tinymce">
<span id="customizationtinymce"></span><h2>Using TinyMCE<a class="headerlink" href="#using-tinymce" title="Permalink to this headline">¶</a></h2>
<p>Grappelli already comes with TinyMCE and a minimal theme as well. In order to use TinyMCE, copy <code class="docutils literal notranslate"><span class="pre">tinymce_setup.js</span></code> to your static directory, adjust the setup (see <a class="reference external" href="http://www.tinymce.com/wiki.php/Configuration">TinyMCE Configuration</a>) and add the necessary javascripts to your ModelAdmin definition (see <a class="reference external" href="https://docs.djangoproject.com/en/1.11/ref/contrib/admin/#modeladmin-asset-definitions">ModelAdmin asset definitions</a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
    <span class="n">js</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;/static/grappelli/tinymce/jscripts/tiny_mce/tiny_mce.js&#39;</span><span class="p">,</span>
        <span class="s1">&#39;/static/path/to/your/tinymce_setup.js&#39;</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>Using TinyMCE with inlines is a bit more tricky because of the hidden extra inline. You need to write a custom template and use the inline callbacks to</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">onInit</span></code>: remove TinyMCE instances from the empty form.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onAfterAdded</span></code>: initialize TinyMCE instance(s) from the form.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onBeforeRemoved</span></code>: remove TinyMCE instance(s) from the form.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TinyMCE with inlines is not supported by default.</p>
</div>
<p>If our version of TinyMCE does not fit your needs, add a different version to your static directory and change the above mentioned ModelAdmin setup (paths to js–files).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>TinyMCE will be removed with version 3.0 of Grappelli, because TinyMCE version 4.x comes with a decent skin.</p>
</div>
</div>
<div class="section" id="changelist-templates">
<span id="changelistfilters"></span><h2>Changelist Templates<a class="headerlink" href="#changelist-templates" title="Permalink to this headline">¶</a></h2>
<p>Grappelli comes with different change–list templates. To use the alternative templates, you need to add <code class="docutils literal notranslate"><span class="pre">change_list_template</span></code> to your ModelAdmin definition.</p>
<div class="section" id="filters-as-drop-down-automatically-applied-default-template">
<h3>Filters as drop-down, automatically applied (default template)<a class="headerlink" href="#filters-as-drop-down-automatically-applied-default-template" title="Permalink to this headline">¶</a></h3>
<p>The default template shows filters as a drop–down, selecting a single filter immediately applies the filter. This template supports use cases where single filters should be quickly applicable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">change_list_template</span> <span class="o">=</span> <span class="s2">&quot;admin/change_list.html&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="filters-as-drop-down-manually-applied">
<h3>Filters as drop-down, manually applied<a class="headerlink" href="#filters-as-drop-down-manually-applied" title="Permalink to this headline">¶</a></h3>
<p>This template shows filters as a drop-down, selected filters have to be applied manually by clicking an “Apply” button. This template supports use cases where multiple filters have to be selected and applied at the same time.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">change_list_template</span> <span class="o">=</span> <span class="s2">&quot;admin/change_list_filter_confirm.html&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="filters-in-a-sidebar-automatically-applied">
<h3>Filters in a sidebar, automatically applied<a class="headerlink" href="#filters-in-a-sidebar-automatically-applied" title="Permalink to this headline">¶</a></h3>
<p>This template shows filters in a sidebar, selecting a single filter immediately applies the filter. This template supports use cases where single filters should be quickly applicable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">change_list_template</span> <span class="o">=</span> <span class="s2">&quot;admin/change_list_filter_sidebar.html&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="filters-in-a-sidebar-manually-applied">
<h3>Filters in a sidebar, manually applied<a class="headerlink" href="#filters-in-a-sidebar-manually-applied" title="Permalink to this headline">¶</a></h3>
<p>This template shows filters in a sidebar, selected filters have to be applied manually by clicking an “Apply” button. This template supports use cases where multiple filters have to be selected and applied at the same time.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">change_list_template</span> <span class="o">=</span> <span class="s2">&quot;admin/change_list_filter_confirm_sidebar.html&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="changelist-filters">
<h2>Changelist Filters<a class="headerlink" href="#changelist-filters" title="Permalink to this headline">¶</a></h2>
<p>Grappelli comes with 2 different change–list filters. The standard filters are selects, the alternative filters are list of options (similar to djangos admin interface). To use the alternative filters, you need to add <code class="docutils literal notranslate"><span class="pre">change_list_filter_template</span></code> to your ModelAdmin definition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyModelOptions</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">change_list_filter_template</span> <span class="o">=</span> <span class="s2">&quot;admin/filter_listing.html&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="switch-user">
<span id="switchuser"></span><h2>Switch User<a class="headerlink" href="#switch-user" title="Permalink to this headline">¶</a></h2>
<p>You sometimes might need to see the admin interface as a different user (e.g. in order to verify if permissions are set correctly or to follow an editors explanation). If you set <code class="docutils literal notranslate"><span class="pre">GRAPPELLI_SWITCH_USER</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>, you’ll get additional users with your user dropdown. Moreover, you can easily switch back to the original User.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality might change with future releases.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are using a custom user model and want to turn this feature on, pay attention to the following topics:</p>
<ul class="simple">
<li><p>if <code class="docutils literal notranslate"><span class="pre">is_superuser</span></code> is neither a field nor a property of your user model, you will have to set both <code class="docutils literal notranslate"><span class="pre">GRAPPELLI_SWITCH_USER_ORIGINAL</span></code> and <code class="docutils literal notranslate"><span class="pre">GRAPPELLI_SWITCH_USER_TARGET</span></code> to functions; failing to do so will break the admin area. If you followed the instructions in the <a class="reference external" href="https://docs.djangoproject.com/en/1.11/topics/auth/customizing/#a-full-example">Django docs</a>, <code class="docutils literal notranslate"><span class="pre">is_superuser</span></code> won’t be a field nor a property of your user model. If you define <code class="docutils literal notranslate"><span class="pre">is_superuser</span></code> as a property of your model, the admin area will get back to work.</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">is_staff</span></code> is not a field, and/or <code class="docutils literal notranslate"><span class="pre">is_superuser</span></code> is neither a field nor a property of your user model, the Grappelli tests will be broken (because e.g. of some <code class="docutils literal notranslate"><span class="pre">user.is_staff</span> <span class="pre">=</span> <span class="pre">True</span></code> instructions). This -again- is your case if you followed the <a class="reference external" href="https://docs.djangoproject.com/en/1.11/topics/auth/customizing/#a-full-example">Django docs on customizing user model</a>, where <code class="docutils literal notranslate"><span class="pre">is_staff</span></code> is defined as a property (as opposite to a field).</p></li>
</ul>
</div>
</div>
<div class="section" id="clean-input-types">
<span id="cleaninputtypes"></span><h2>Clean input types<a class="headerlink" href="#clean-input-types" title="Permalink to this headline">¶</a></h2>
<p>With setting <code class="docutils literal notranslate"><span class="pre">GRAPPELLI_CLEAN_INPUT_TYPES</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>, Grappelli automatically replaces all HTML5 input types (search, email, url, tel, number, range, date month, week, time, datetime, datetime-local, color) with <code class="docutils literal notranslate"><span class="pre">type=&quot;text&quot;</span></code>. This is useful if you want to avoid browser inconsistencies with the admin interface. Moreover, you remove frontend form validation and thereby ensure a consistent user experience.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality might change with future releases.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dashboard_setup.html" class="btn btn-neutral float-right" title="Dashboard Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quick start guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Patrick Kranzlmueller

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>